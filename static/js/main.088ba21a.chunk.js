(this["webpackJsonpexpense-planner"]=this["webpackJsonpexpense-planner"]||[]).push([[0],{103:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(3),s=n.n(r),c=n(91),o=n.n(c),i=(n(103),n(57)),u=n(12),l=n(5),d=n(7),m=n(35),b=n(50),j=n(64),f=n(15),p=n(32);function x(){var e=Object(p.a)(["\n  mutation DeleteEntry($query: EntryQueryInput!) {\n    deleteOneEntry(query: $query) {\n      _id\n      title\n    }\n  }\n"]);return x=function(){return e},e}function h(){var e=Object(p.a)(["\n  mutation UpdateEntry($query: EntryQueryInput, $set: EntryUpdateInput!) {\n    updateOneEntry(query: $query, set: $set) {\n      _id\n    }\n  }\n"]);return h=function(){return e},e}function g(){var e=Object(p.a)(["\n  mutation AddEntry($data: EntryInsertInput!) {\n    insertOneEntry(data: $data) {\n      _id\n      title\n    }\n  }\n"]);return g=function(){return e},e}var O=Object(f.gql)(g()),v=Object(f.gql)(h()),y=Object(f.gql)(x()),w=n(6),N=n.n(w),k=n(13),S=n(52),E=s.a.createContext(),C=function(){var e=s.a.useContext(E);if(!e)throw new Error("You must call useRealmApp() inside of a <RealmAppProvider />");return e},_=function(e){var t=e.appId,n=e.children,r=s.a.useState(new S.a(t)),c=Object(d.a)(r,2),o=c[0],i=c[1];s.a.useEffect((function(){i(new S.a(t))}),[t]);var u=s.a.useState(o.currentUser),m=Object(d.a)(u,2),b=m[0],j=m[1];function f(){return(f=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.logIn(t);case 2:j(o.currentUser);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(k.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=o.currentUser)||void 0===t?void 0:t.logOut();case 2:j(o.currentUser);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=Object(l.a)(Object(l.a)({},o),{},{currentUser:b,logIn:function(e){return f.apply(this,arguments)},logOut:function(){return p.apply(this,arguments)},forceLogout:function(){b&&(b.accessToken=null,b.refreshToken=null,j(null))}});return Object(a.jsx)(E.Provider,{value:x,children:n})},q=function(e){var t={title:e.entry?e.entry.title:"",date:e.entry?new Date(e.entry.date):new Date,amount:e.entry?e.entry.amount:0,type:e.entry?e.entry.type:"expense",is_recurring:!!e.entry&&e.entry.is_recurring},n=Object(r.useState)(t),s=Object(d.a)(n,2),c=s[0],o=s[1],i=Object(f.useMutation)(O),u=Object(d.a)(i,1)[0],m=Object(f.useMutation)(v),b=Object(d.a)(m,1)[0],j=C();Object(r.useEffect)((function(){e.submitFromOutside&&(e.entry?x():p())}),[e.submitFromOutside]);var p=function(){u({variables:{data:Object(l.a)(Object(l.a)({},c),{},{user:{link:j.currentUser._id}})}}).then((function(t){e.onSubmitted&&e.onSubmitted(),console.log("stored entry:",t)}))},x=function(){var t;b({variables:{query:{_id:null===(t=e.entry)||void 0===t?void 0:t._id},set:{title:c.title,date:c.date,amount:c.amount}}}).then((function(t){e.onSubmitted&&e.onSubmitted(),console.log("updated entry:",t)}))};return Object(a.jsx)("form",{className:"mt-8",children:Object(a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[Object(a.jsx)("div",{className:"col-span-2",children:Object(a.jsx)("input",{name:"title",value:c.title,onChange:function(e){return o(Object(l.a)(Object(l.a)({},c),{},{title:e.target.value}))},placeholder:"Title",className:"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5"})}),Object(a.jsx)("div",{className:"col-span-2",children:Object(a.jsx)("input",{name:"date",value:c.date.toISOString().split("T")[0],onChange:function(e){return o(Object(l.a)(Object(l.a)({},c),{},{date:new Date(e.target.value)}))},type:"date",placeholder:"Date",className:"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5"})}),Object(a.jsx)("div",{className:"col-span-1",children:Object(a.jsx)("input",{name:"amount",value:c.amount,onChange:function(e){return o(Object(l.a)(Object(l.a)({},c),{},{amount:parseFloat(e.target.value)}))},type:"number",min:"0",placeholder:"Amount",className:"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5"})}),Object(a.jsx)("div",{className:"col-span-1",children:Object(a.jsxs)("select",{name:"type",value:c.type,onChange:function(e){return o(Object(l.a)(Object(l.a)({},c),{},{type:e.target.value}))},placeholder:"Type",className:"mt-1 block form-select w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5",children:[Object(a.jsx)("option",{value:"expense",children:"Expense"}),Object(a.jsx)("option",{value:"income",children:"Income"})]})}),Object(a.jsxs)("div",{className:"col-span-2 flex items-start",children:[Object(a.jsx)("div",{className:"items-center h-5",children:Object(a.jsx)("input",{name:"is_recurring",id:"is_recurring",checked:c.is_recurring,onChange:function(e){return o(Object(l.a)(Object(l.a)({},c),{},{is_recurring:e.target.checked}))},type:"checkbox",className:"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out"})}),Object(a.jsx)("div",{className:"ml-3 text-sm leading-5",children:Object(a.jsx)("label",{htmlFor:"is_recurring",className:"font-medium text-gray-700",children:"Is recurring"})})]})]})})},I=n(86);m.b.add(j.a);var A=function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)(!1),i=Object(d.a)(o,2),u=i[0],l=i[1],m=e.entry?"Update":"Add",j=e.entry?"Update entry":"Add new entry";return Object(a.jsx)(r.Fragment,{children:Object(a.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:Object(a.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(a.jsx)("div",{className:"fixed inset-0 transition-opacity",children:Object(a.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),Object(a.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen"}),"\u200b",Object(a.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[Object(a.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(a.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[Object(a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:j}),Object(a.jsx)("div",{className:"mt-2",children:Object(a.jsx)(q,{entry:e.entry,submitFromOutside:u,onSubmitted:function(){e.setShowModal(!1)}})})]})}),Object(a.jsxs)("div",{className:"bg-gray-100 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[Object(a.jsx)("span",{className:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto",children:Object(a.jsxs)("button",{type:"button",onClick:function(e){e.preventDefault(),c(!0),l(!0)},className:I("inline-flex items-center justify-center w-full rounded-md border border-transparent px-4 py-2 bg-indigo-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo transition ease-in-out duration-150 sm:text-sm sm:leading-5",{loading:s}),children:[s&&Object(a.jsx)(b.a,{className:"animate-spin h-5 w-5 mr-3",icon:["fas","circle-notch"]}),m]})}),Object(a.jsx)("span",{className:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto",children:Object(a.jsx)("button",{onClick:function(t){t.preventDefault(),e.setShowModal(!1)},type:"button",className:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5",children:"Cancel"})})]})]})]})})})};function D(){var e=Object(p.a)(["\n  fragment EntryData on Entry {\n    _id\n    title\n    type\n    amount\n    is_recurring\n    date\n  }\n  \n  query GetAllEntries {\n    entries (\n      query: { is_recurring: false }\n      sortBy: DATE_ASC\n    ) {...EntryData}\n    \n    recurringEntries: entries (\n      query: { is_recurring: true }\n    ) {...EntryData}\n  }\n"]);return D=function(){return e},e}var M=Object(f.gql)(D()),U=n(38),Y=n.n(U),F=n(95);function $(){var e=Object(p.a)(["\n  mutation UpdateApplication($query: ApplicationQueryInput, $set: ApplicationUpdateInput!) {\n    updateOneApplication(query: $query, set: $set) {\n      _id\n      balance\n    }\n  }\n"]);return $=function(){return e},e}function T(){var e=Object(p.a)(["\n  query GetApplication($query: ApplicationQueryInput) {\n    application (\n      query: $query\n    ) {\n      balance\n    }\n  }\n"]);return T=function(){return e},e}var P=Object(f.gql)(T()),z=Object(f.gql)($());m.b.add(F.a),m.b.add(j.b);var L=n(86),Q=function(e,t,n){var a=e.filter((function(e){return Y()(e.date).startOf("month").isSame(n.startOf("month"))})),r=t.map((function(e){var t=Y()(e.date).month(n.get("month")).year(n.get("year")).toISOString();return Object(l.a)(Object(l.a)({},e),{},{date:t})}));return B(a.concat(r).filter((function(e){return Y()(e.date).isAfter(Y()())})))},B=function(e){return e.sort((function(e,t){return e.date>t.date?1:e.date<t.date?-1:0}))},R=Object(u.g)((function(e){var t=Object(r.useState)(1e4),n=Object(d.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(4),u=Object(d.a)(i,2),l=u[0],m=u[1],j=Object(r.useState)([]),p=Object(d.a)(j,2),x=p[0],h=p[1],g=Object(r.useState)([]),O=Object(d.a)(g,2),v=O[0],w=O[1],N=Object(r.useState)([]),k=Object(d.a)(N,2),S=k[0],E=k[1],_=Object(f.useMutation)(y),q=Object(d.a)(_,1)[0],I=Object(f.useMutation)(z),D=Object(d.a)(I,1)[0],U=Object(r.useState)(void 0),F=Object(d.a)(U,2),$=F[0],T=F[1],B=C(),R=s.a.useRef(document.createElement("input")),H=Object(r.useState)(!1),V=Object(d.a)(H,2),G=V[0],J=V[1],K=c,W=Object(f.useLazyQuery)(M,{onCompleted:function(e){console.log("completed with data:",e),h(e.entries),w(e.recurringEntries)},onError:function(e){console.log(e)}}),X=Object(d.a)(W,2),Z=X[0],ee=X[1],te=(ee.loading,ee.error,ee.data,Object(f.useLazyQuery)(P,{variables:{query:{_id:B.currentUser.customData.application}},onCompleted:function(e){o(e.application.balance),R.current.value=e.application.balance},onError:function(e){console.log(e)}})),ne=Object(d.a)(te,1)[0];Object(r.useEffect)((function(){Z(),ne()}),[]),Object(r.useEffect)((function(){for(var e=[],t=0;t<l;t++)e.push(Y()().add(t,"month").startOf("month"));E(e)}),[l]);var ae=function(e){e.preventDefault(),J(!0)};return Object(a.jsxs)(s.a.Fragment,{children:[G&&Object(a.jsx)(A,{setShowModal:J,entry:null===$||void 0===$?void 0:$.entry}),Object(a.jsx)("div",{className:"min-h-screen flex justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 text-xs md:text-sm",children:Object(a.jsxs)("div",{className:"max-w-2xl w-full",children:[Object(a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[Object(a.jsxs)("div",{className:"col-span-1",children:[Object(a.jsx)("label",{htmlFor:"balance",className:"block text-sm font-medium leading-5 text-gray-700",children:"Initial balance"}),Object(a.jsx)("input",{ref:R,name:"balance",id:"balance",defaultValue:c,type:"number",className:"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5"})]}),Object(a.jsxs)("div",{className:"col-span-1",children:[Object(a.jsx)("label",{htmlFor:"months",className:"block text-sm font-medium leading-5 text-gray-700",children:"Number of months"}),Object(a.jsx)("input",{name:"months",id:"months",defaultValue:l,min:"1",type:"number",onChange:function(e){m(parseInt(e.target.value)||l)},className:"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5"})]}),Object(a.jsx)("div",{className:"col-span-2",children:Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),o(parseInt(R.current.value)),D({variables:{query:{_id:B.currentUser.customData.application},set:{balance:R.current.value}}}).then((function(e){console.log(e)}))},type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out",children:"Set"})}),Object(a.jsx)("div",{className:"col-span-2",children:Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),J(!0)},type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out",children:"Add new entry"})})]}),S.map((function(e){return Q(x,v,e).length<=0?"":Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)("div",{className:"mt-8",children:e.format("MMMM YYYY")}),Object(a.jsx)("div",{className:"entries-container border rounded divide-y",children:Q(x,v,e).map((function(t){return K="income"===t.type?K+t.amount:K-t.amount,Object(a.jsxs)("div",{onClick:function(){!function(e,t){T({dateKey:t,entry:e})}(t,"".concat(e.format("MM-YYYY"),":").concat(t._id))},className:"entry p-2",children:[Object(a.jsxs)("div",{className:"flex justify-between",children:[Object(a.jsx)("div",{className:"w-2/12",children:Y()(t.date).format("D.M.")}),Object(a.jsx)("div",{className:"w-6/12",children:t.title}),Object(a.jsxs)("div",{className:L("w-2/12","text-right","font-semibold",{"text-red-500":"expense"===t.type,"text-green-500":"income"===t.type}),children:["expense"===t.type?"-":"+",t.amount]}),Object(a.jsx)("div",{className:"w-2/12 text-right font-semibold",children:K})]}),(n="".concat(e.format("MM-YYYY"),":").concat(t._id),$&&$.dateKey===n&&Object(a.jsxs)("div",{className:"flex justify-end space-x-2 text-xs mt-2",children:[Object(a.jsxs)("button",{onClick:function(){q({variables:{query:{_id:t._id}}}).then((function(e){console.log(e)}))},className:"border-b border-red-500 text-red-500",children:[Object(a.jsx)(b.a,{icon:["far","trash-alt"]})," Delete"]}),Object(a.jsxs)("button",{onClick:ae,className:"border-b border-indigo-500 text-indigo-500",children:[Object(a.jsx)(b.a,{icon:["fas","pencil-alt"],className:""})," Edit"]})]}))]},t._id);var n}))})]},e.format("MM-YYYY"))}))]})})]})})),H=n(97);function V(){var e=C(),t=s.a.useState("login"),n=Object(d.a)(t,2),r=n[0],c=(n[1],s.a.useState("")),o=Object(d.a)(c,2),i=o[0],m=o[1],b=s.a.useState(""),j=Object(d.a)(b,2),f=j[0],p=j[1],x=s.a.useState({}),h=Object(d.a)(x,2),g=(h[0],h[1]);s.a.useEffect((function(){m(""),p(""),g({})}),[r]);var O=s.a.useState(!1),v=Object(d.a)(O,2),y=(v[0],v[1]),w=function(){var t=Object(k.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y(!0),g((function(e){return Object(l.a)(Object(l.a)({},e),{},{password:null})})),t.prev=2,t.next=5,e.logIn(S.b.emailPassword(i,f));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),G(t.t0,g);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(){return t.apply(this,arguments)}}();return e.currentUser?Object(a.jsx)(u.a,{to:"/"}):Object(a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:Object(a.jsxs)("div",{className:"max-w-md w-full",children:[Object(a.jsx)("div",{children:Object(a.jsx)("h2",{className:"mt-6 text-center text-3xl leading-9 font-extrabold text-gray-900",children:"Sign in"})}),Object(a.jsxs)("form",{className:"mt-8",children:[Object(a.jsxs)("div",{className:"rounded-md shadow-sm",children:[Object(a.jsx)("div",{children:Object(a.jsx)("input",{"aria-label":"Email address",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5",placeholder:"Email address",onChange:function(e){g((function(e){return Object(l.a)(Object(l.a)({},e),{},{email:null})})),m(e.target.value)},value:i})}),Object(a.jsx)("div",{className:"-mt-px",children:Object(a.jsx)("input",{"aria-label":"Password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5",placeholder:"Password",onChange:function(e){p(e.target.value)},value:f})})]}),Object(a.jsx)("div",{className:"mt-6",children:Object(a.jsxs)("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out",onClick:function(e){e.preventDefault(),w()},children:[Object(a.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:Object(a.jsx)("svg",{className:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400 transition ease-in-out duration-150",fill:"currentColor",viewBox:"0 0 20 20",children:Object(a.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),"Sign in"]})})]})]})})}function G(e,t){var n=function(e){var t,n=e.message.split(":"),a=n[n.length-1].trimStart();if(!a)return{status:"",message:""};var r=Object(H.a)(/(.+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]\(status ([0-9][0-9][0-9])/,{message:1,status:2}),s=a.match(r),c=null!==(t=null===s||void 0===s?void 0:s.groups)&&void 0!==t?t:{},o=c.status,i=c.message;return{status:o,message:i}}(e),a=n.status;switch(n.message||a){case"invalid username":t((function(e){return Object(l.a)(Object(l.a)({},e),{},{email:"Invalid email address."})}));break;case"invalid username/password":case"invalid password":case"401":t((function(e){return Object(l.a)(Object(l.a)({},e),{},{password:"Incorrect password."})}));break;case"name already in use":case"409":t((function(e){return Object(l.a)(Object(l.a)({},e),{},{email:"Email is already registered."})}));break;case"password must be between 6 and 128 characters":case"400":t((function(e){return Object(l.a)(Object(l.a)({},e),{},{password:"Password must be between 6 and 128 characters."})}))}}var J=s.a.createContext(),K=function(e){var t=e.children,n=Object(u.f)(),r=s.a.useState(),c=Object(d.a)(r,2),o=c[0],i=c[1],l=C();s.a.useEffect((function(){return n.listen((function(){return i(void 0)}))}),[]),s.a.useEffect((function(){401===o&&l.forceLogout()}),[o]);return Object(a.jsx)(J.Provider,{value:{setErrorStatusCode:i},children:t})},W=function(e,t){var n=new f.HttpLink({uri:"https://realm.mongodb.com/api/client/v2.0/app/".concat(e.id,"/graphql"),fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var n=Object(k.a)(N.a.mark((function n(a,r){return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.currentUser){n.next=2;break}throw new Error("Must be logged in to use the GraphQL API");case 2:return n.next=4,e.currentUser.refreshCustomData().catch((function(e){t(401)}));case 4:return r.headers.Authorization="Bearer ".concat(e.currentUser.accessToken),n.abrupt("return",fetch(a,r));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}),a=new f.InMemoryCache;return new f.ApolloClient({link:n,cache:a})};function X(e){var t=e.children,n=C(),c=Object(r.useContext)(J).setErrorStatusCode,o=s.a.useState(W(n,c)),i=Object(d.a)(o,2),u=i[0],l=i[1];return s.a.useEffect((function(){l(W(n,c))}),[n]),Object(a.jsx)(f.ApolloProvider,{client:u,children:t})}n(121);var Z=n(45),ee=function(e){var t=e.component,n=Object(Z.a)(e,["component"]),r=C();return Object(a.jsx)(u.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return r.currentUser?Object(a.jsx)(t,Object(l.a)({},e)):Object(a.jsx)(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},te=n(22),ne=Object(u.g)((function(e){var t=C(),n=Object(f.useMutation)(O),s=Object(d.a)(n,2),c=s[0],o=(s[1].data,Object(r.useState)({title:"",amount:0,type:"expense",date:new Date,is_recurring:!1,user:{link:t.currentUser._id}})),i=Object(d.a)(o,2),u=i[0],m=i[1],b=function(e){var t,n=e.target,a=n.name;t=n instanceof HTMLInputElement&&"checkbox"===n.type?n.checked:"date"===n.type?new Date(n.value):n.value,m(Object(l.a)(Object(l.a)({},u),{},Object(te.a)({},a,t)))};return Object(a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:Object(a.jsxs)("div",{className:"max-w-md w-full",children:[Object(a.jsx)("div",{children:Object(a.jsx)("h2",{className:"mt-6 text-center text-3xl leading-9 font-extrabold text-gray-900",children:"Add entry"})}),Object(a.jsxs)("form",{className:"mt-8",children:[Object(a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[Object(a.jsx)("div",{className:"col-span-2",children:Object(a.jsx)("input",{name:"title",value:u.title,onChange:b,placeholder:"Title",className:"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5"})}),Object(a.jsx)("div",{className:"col-span-2",children:Object(a.jsx)("input",{name:"date",value:u.date.toISOString().split("T")[0],onChange:b,type:"date",placeholder:"Date",className:"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5"})}),Object(a.jsx)("div",{className:"col-span-1",children:Object(a.jsx)("input",{name:"amount",value:u.amount,onChange:b,type:"number",min:"0",placeholder:"Amount",className:"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5"})}),Object(a.jsx)("div",{className:"col-span-1",children:Object(a.jsxs)("select",{name:"type",value:u.type,onChange:b,placeholder:"Type",className:"mt-1 block form-select w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5",children:[Object(a.jsx)("option",{value:"expense",children:"Expense"}),Object(a.jsx)("option",{value:"income",children:"Income"})]})}),Object(a.jsxs)("div",{className:"col-span-2 flex items-start",children:[Object(a.jsx)("div",{className:"items-center h-5",children:Object(a.jsx)("input",{onChange:b,checked:u.is_recurring,id:"is_recurring",name:"is_recurring",type:"checkbox",className:"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out"})}),Object(a.jsx)("div",{className:"ml-3 text-sm leading-5",children:Object(a.jsx)("label",{htmlFor:"is_recurring",className:"font-medium text-gray-700",children:"Is recurring"})})]})]}),Object(a.jsx)("div",{className:"mt-6",children:Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),c({variables:{data:u}}).then((function(e){console.log(e)}))},type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out",children:"Add"})})]})]})})}));var ae=function(){return Object(a.jsx)(_,{appId:"expenses-planner-react-tcjrv",children:Object(a.jsx)(i.a,{children:Object(a.jsx)(K,{children:Object(a.jsx)(X,{children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(ee,{exact:!0,path:"/",component:R}),Object(a.jsx)(ee,{exact:!0,path:"/entries/add",component:ne}),Object(a.jsx)(u.b,{exact:!0,path:"/login",component:V})]})})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(ae,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[122,1,2]]]);
//# sourceMappingURL=main.088ba21a.chunk.js.map
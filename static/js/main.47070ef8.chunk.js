(this["webpackJsonpexpense-planner"]=this["webpackJsonpexpense-planner"]||[]).push([[0],{112:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(84),o=n.n(c),u=(n(95),n(96),n(52)),s=n(11),i=n(12),l=n(85),d=n(30);function m(){var e=Object(l.a)(["\n    query GetAllEntries {\n      entries {\n        _id\n        title\n        type\n        amount\n        is_recurring\n        date\n      }\n    }\n  "]);return m=function(){return e},e}var f=function(){return Object(d.gql)(m())},p=n(4),b=n.n(p),v=n(5),g=n(9),h=n(48),w=r.a.createContext(),E=function(){var e=r.a.useContext(w);if(!e)throw new Error("You must call useRealmApp() inside of a <RealmAppProvider />");return e},x=function(e){var t=e.appId,n=e.children,a=r.a.useState(new h.a(t)),c=Object(i.a)(a,2),o=c[0],u=c[1];r.a.useEffect((function(){u(new h.a(t))}),[t]);var s=r.a.useState(o.currentUser),l=Object(i.a)(s,2),d=l[0],m=l[1];function f(){return(f=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.logIn(t);case 2:m(o.currentUser);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=o.currentUser)||void 0===t?void 0:t.logOut();case 2:m(o.currentUser);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=Object(v.a)(Object(v.a)({},o),{},{currentUser:d,logIn:function(e){return f.apply(this,arguments)},logOut:function(){return p.apply(this,arguments)},forceLogout:function(){d&&(d.accessToken=null,d.refreshToken=null,m(null))}});return r.a.createElement(w.Provider,{value:E},n)},j=r.a.createContext(),O=function(e){var t=e.children,n=Object(s.f)(),a=r.a.useState(),c=Object(i.a)(a,2),o=c[0],u=c[1],l=E();r.a.useEffect((function(){return n.listen((function(){return u(void 0)}))}),[]),r.a.useEffect((function(){401===o&&l.forceLogout()}),[o]);return r.a.createElement(j.Provider,{value:{setErrorStatusCode:u}},t)},y=Object(s.g)((function(e){var t=Object(a.useContext)(j).setErrorStatusCode,n=Object(d.useLazyQuery)(f(),{onCompleted:function(){console.log("completed with data:",s)},onError:function(){t(401)}}),c=Object(i.a)(n,2),o=c[0],u=c[1],s=(u.loading,u.error,u.data);return Object(a.useEffect)((function(){o()}),[]),r.a.createElement("div",null)})),k=n(89);function S(){var e=E(),t=r.a.useState("login"),n=Object(i.a)(t,2),a=n[0],c=(n[1],r.a.useState("")),o=Object(i.a)(c,2),u=o[0],l=o[1],d=r.a.useState(""),m=Object(i.a)(d,2),f=m[0],p=m[1],w=r.a.useState({}),x=Object(i.a)(w,2),j=(x[0],x[1]);r.a.useEffect((function(){l(""),p(""),j({})}),[a]);var O=r.a.useState(!1),y=Object(i.a)(O,2),k=(y[0],y[1]),S=function(){var t=Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(!0),j((function(e){return Object(v.a)(Object(v.a)({},e),{},{password:null})})),t.prev=2,t.next=5,e.logIn(h.b.emailPassword(u,f));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),C(t.t0,j);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(){return t.apply(this,arguments)}}();return e.currentUser?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},r.a.createElement("div",{className:"max-w-md w-full"},r.a.createElement("div",null,r.a.createElement("h2",{className:"mt-6 text-center text-3xl leading-9 font-extrabold text-gray-900"},"Sign in")),r.a.createElement("form",{className:"mt-8"},r.a.createElement("div",{className:"rounded-md shadow-sm"},r.a.createElement("div",null,r.a.createElement("input",{"aria-label":"Email address",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5",placeholder:"Email address",onChange:function(e){j((function(e){return Object(v.a)(Object(v.a)({},e),{},{email:null})})),l(e.target.value)},value:u})),r.a.createElement("div",{className:"-mt-px"},r.a.createElement("input",{"aria-label":"Password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5",placeholder:"Password",onChange:function(e){p(e.target.value)},value:f}))),r.a.createElement("div",{className:"mt-6"},r.a.createElement("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out",onClick:function(e){e.preventDefault(),S()}},r.a.createElement("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3"},r.a.createElement("svg",{className:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400 transition ease-in-out duration-150",fill:"currentColor",viewBox:"0 0 20 20"},r.a.createElement("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"}))),"Sign in")))))}function C(e,t){var n=function(e){var t,n=e.message.split(":"),a=n[n.length-1].trimStart();if(!a)return{status:"",message:""};var r=Object(k.a)(/(.+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]\(status ([0-9][0-9][0-9])/,{message:1,status:2}),c=a.match(r),o=null!==(t=null===c||void 0===c?void 0:c.groups)&&void 0!==t?t:{},u=o.status,s=o.message;return{status:u,message:s}}(e),a=n.status;switch(n.message||a){case"invalid username":t((function(e){return Object(v.a)(Object(v.a)({},e),{},{email:"Invalid email address."})}));break;case"invalid username/password":case"invalid password":case"401":t((function(e){return Object(v.a)(Object(v.a)({},e),{},{password:"Incorrect password."})}));break;case"name already in use":case"409":t((function(e){return Object(v.a)(Object(v.a)({},e),{},{email:"Email is already registered."})}));break;case"password must be between 6 and 128 characters":case"400":t((function(e){return Object(v.a)(Object(v.a)({},e),{},{password:"Password must be between 6 and 128 characters."})}))}}var N=function(e,t){var n=new d.HttpLink({uri:"https://realm.mongodb.com/api/client/v2.0/app/".concat(e.id,"/graphql"),fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var n=Object(g.a)(b.a.mark((function n(a,r){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.currentUser){n.next=2;break}throw new Error("Must be logged in to use the GraphQL API");case 2:return n.next=4,e.currentUser.refreshCustomData().catch((function(e){t(401)}));case 4:return r.headers.Authorization="Bearer ".concat(e.currentUser.accessToken),n.abrupt("return",fetch(a,r));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}),a=new d.InMemoryCache;return new d.ApolloClient({link:n,cache:a})};function A(e){var t=e.children,n=E(),c=Object(a.useContext)(j).setErrorStatusCode,o=r.a.useState(N(n,c)),u=Object(i.a)(o,2),s=u[0],l=u[1];return r.a.useEffect((function(){l(N(n,c))}),[n]),r.a.createElement(d.ApolloProvider,{client:s},t)}n(112);var I=n(40),U=function(e){var t=e.component,n=Object(I.a)(e,["component"]),a=E();return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return a.currentUser?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};var P=function(){return r.a.createElement(x,{appId:"expenses-planner-react-tcjrv"},r.a.createElement(u.a,null,r.a.createElement(O,null,r.a.createElement(A,null,r.a.createElement("div",{className:"App"},r.a.createElement(U,{exact:!0,path:"/",component:y}),r.a.createElement(s.b,{exact:!0,path:"/login",component:S}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},90:function(e,t,n){e.exports=n(114)},96:function(e,t,n){}},[[90,1,2]]]);
//# sourceMappingURL=main.47070ef8.chunk.js.map